{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/abun/projects/web-apps/nanobanana-to-pptx/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { ChatMessage, Message } from './components/ChatMessage'\nimport { ChatInput } from './components/ChatInput'\nimport { ToolExecution, ToolExecutionItem } from './components/ToolExecution'\nimport { PptxViewer } from './components/PptxViewer'\nimport { ImageUpload } from './components/ImageUpload'\n\nexport default function Home() {\n  const [messages, setMessages] = useState<Message[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [toolExecutions, setToolExecutions] = useState<ToolExecutionItem[]>([])\n  const [currentPptx, setCurrentPptx] = useState<string | null>(null)\n  const [uploadedImage, setUploadedImage] = useState<string | null>(null)\n  const [sessionId, setSessionId] = useState<string | null>(null)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages, toolExecutions])\n\n  const handleSendMessage = async (content: string) => {\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content,\n      timestamp: new Date(),\n      image: uploadedImage || undefined,\n    }\n\n    setMessages((prev) => [...prev, userMessage])\n    setIsLoading(true)\n    setToolExecutions([])\n    setUploadedImage(null)\n\n    try {\n      const response = await fetch('/api/agent', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          prompt: content,\n          imageBase64: uploadedImage,\n          sessionId,\n        }),\n      })\n\n      if (!response.ok) throw new Error('Agent request failed')\n\n      const reader = response.body?.getReader()\n      const decoder = new TextDecoder()\n\n      if (!reader) throw new Error('No response body')\n\n      let buffer = ''\n      while (true) {\n        const { done, value } = await reader.read()\n        if (done) break\n\n        buffer += decoder.decode(value, { stream: true })\n        const lines = buffer.split('\\n')\n        buffer = lines.pop() || ''\n\n        for (const line of lines) {\n          if (!line.trim()) continue\n\n          try {\n            const event = JSON.parse(line)\n            handleStreamEvent(event)\n          } catch {\n            // Skip non-JSON lines\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error:', error)\n      const errorMessage: Message = {\n        id: Date.now().toString(),\n        role: 'assistant',\n        content: '„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ',\n        timestamp: new Date(),\n      }\n      setMessages((prev) => [...prev, errorMessage])\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleStreamEvent = (event: {\n    type: string\n    sessionId?: string\n    tool?: string\n    status?: 'running' | 'completed' | 'error'\n    result?: unknown\n    content?: string\n    pptxPath?: string\n    previewPath?: string\n  }) => {\n    switch (event.type) {\n      case 'session_start':\n        setSessionId(event.sessionId || null)\n        break\n\n      case 'tool_start':\n        setToolExecutions((prev) => [\n          ...prev,\n          {\n            id: Date.now().toString(),\n            name: event.tool || 'unknown',\n            status: 'running',\n            startTime: new Date(),\n          },\n        ])\n        break\n\n      case 'tool_end':\n        setToolExecutions((prev) =>\n          prev.map((t) =>\n            t.name === event.tool && t.status === 'running'\n              ? { ...t, status: event.status || 'completed', result: event.result, endTime: new Date() }\n              : t\n          )\n        )\n        break\n\n      case 'message':\n        const assistantMessage: Message = {\n          id: Date.now().toString(),\n          role: 'assistant',\n          content: event.content || '',\n          timestamp: new Date(),\n        }\n        setMessages((prev) => [...prev, assistantMessage])\n        break\n\n      case 'pptx_generated':\n        if (event.pptxPath) {\n          setCurrentPptx(event.pptxPath)\n        }\n        break\n    }\n  }\n\n  const handleImageUpload = (base64: string) => {\n    setUploadedImage(base64)\n  }\n\n  const handleImageRemove = () => {\n    setUploadedImage(null)\n  }\n\n  return (\n    <div className=\"flex h-screen\">\n      {/* Chat Section */}\n      <div className=\"flex flex-col flex-1 border-r border-[var(--border)]\">\n        {/* Header */}\n        <header className=\"flex items-center justify-between px-6 py-4 border-b border-[var(--border)]\">\n          <h1 className=\"text-xl font-bold\">NanoBanana PPTX Generator</h1>\n          <div className=\"text-sm text-[var(--muted)]\">\n            {sessionId && <span>Session: {sessionId}</span>}\n          </div>\n        </header>\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n          {messages.length === 0 && (\n            <div className=\"flex flex-col items-center justify-center h-full text-center text-[var(--muted)]\">\n              <div className=\"text-6xl mb-4\">üçå</div>\n              <h2 className=\"text-xl font-semibold mb-2\">„Éó„É¨„Çº„É≥„ÉÜ„Éº„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Åæ„Åó„Çá„ÅÜ</h2>\n              <p>‰ΩúÊàê„Åó„Åü„ÅÑ„Çπ„É©„Ç§„Éâ„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>\n              <p className=\"text-sm mt-2\">ÂèÇÁÖßÁîªÂÉè„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åô„Çã„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ</p>\n            </div>\n          )}\n\n          {messages.map((message) => (\n            <ChatMessage key={message.id} message={message} />\n          ))}\n\n          {/* Tool Executions */}\n          {toolExecutions.length > 0 && (\n            <ToolExecution executions={toolExecutions} />\n          )}\n\n          {isLoading && toolExecutions.length === 0 && (\n            <div className=\"flex items-center gap-2 text-[var(--muted)]\">\n              <div className=\"w-2 h-2 bg-[var(--primary)] rounded-full animate-pulse\" />\n              <span>Âá¶ÁêÜ‰∏≠...</span>\n            </div>\n          )}\n\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Image Upload Preview */}\n        {uploadedImage && (\n          <div className=\"px-6 py-2 border-t border-[var(--border)]\">\n            <ImageUpload\n              preview={uploadedImage}\n              onRemove={handleImageRemove}\n            />\n          </div>\n        )}\n\n        {/* Input */}\n        <div className=\"p-6 border-t border-[var(--border)]\">\n          <ChatInput\n            onSend={handleSendMessage}\n            onImageUpload={handleImageUpload}\n            disabled={isLoading}\n          />\n        </div>\n      </div>\n\n      {/* PPTX Viewer Section */}\n      <div className=\"w-[600px] flex flex-col bg-[#111]\">\n        <div className=\"px-6 py-4 border-b border-[var(--border)]\">\n          <h2 className=\"text-lg font-semibold\">„Éó„É¨„Éì„É•„Éº</h2>\n        </div>\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          <PptxViewer\n            pptxPath={currentPptx}\n            sessionId={sessionId}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///home/abun/projects/web-apps/nanobanana-to-pptx/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///home/abun/projects/web-apps/nanobanana-to-pptx/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 427, "column": 0}, "map": {"version":3,"sources":["file:///home/abun/projects/web-apps/nanobanana-to-pptx/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}